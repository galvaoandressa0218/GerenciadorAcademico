<div class="page-container">
  
  <header class="header-bar">
    <h1>Adicionar disciplina</h1>
  </header>

  <div class="content-table-wrapper">
    <table class="disciplines-table">
      <thead>
        <tr>
          <th class="col-nome">Nome</th>
          <th class="col-curso">Curso</th>
          <th class="col-ch">Carga horária</th>
          <th class="col-tipo">Tipo</th>
          <th class="col-class">Classificação</th>
        </tr>
      </thead>
      <tbody>
        @for (disc of disciplines(); track disc.id) {
          <tr class="discipline-row" (click)="toggleExpand(disc)">
            <td class="col-nome nome-expand">
              <div class="nome-principal">{{ disc.nome }} {{ disc.codigo }}</div>
              <div class="desc-toggle">descrição</div>
            </td>
            <td class="col-curso">{{ disc.curso }}</td>
            <td class="col-ch">{{ disc.cargaHoraria }}h</td>
            <td class="col-tipo">{{ disc.tipo }}</td>
            <td class="col-class classificacao">{{ disc.classificacao }}</td>
          </tr>
          @if (disc.expanded) {
            <tr class="description-row">
              <td colspan="5" class="description-content">
                <p>{{ disc.descricao }}</p>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>
  </div>
  
  <footer class="footer-actions">
    <app-botao-adicionar
      [textoBotao]="'+ Adicionar Disciplina'"
      (clickEvent)="openModalToAdd()"
    ></app-botao-adicionar>
  </footer>
</div>

@if (isModalVisible()) {
  <app-pop-up
    title="Adicionar Nova Disciplina"
    (close)="handleCloseModal()"
    (save)="handleSaveDiscipline()">
    
    <form [formGroup]="disciplinaForm" class="form-container">
      <div class="form-field">
        <label for="nome">Nome</label>
        <input id="nome" type="text" formControlName="nome">
      </div>
      <div class="form-field">
        <label for="codigo">Código</label>
        <input id="codigo" type="text" formControlName="codigo">
      </div>
      <div class="form-field">
        <label for="cargaHoraria">Carga Horária</label>
        <input id="cargaHoraria" type="number" formControlName="cargaHoraria">
      </div>
      <div class="form-field">
          <label for="tipo">Tipo</label>
          <select id="tipo" formControlName="tipo">
              @for(tipo of tiposDisciplina; track tipo) {
                <option [value]="tipo">{{ tipo }}</option>
              }
          </select>
      </div>
      <div class="form-field">
          <label for="classificacao">Classificação</label>
          <select id="classificacao" formControlName="classificacao">
              @for(class of classificacoesDisciplina; track class) {
                <option [value]="class">{{ class }}</option>
              }
          </select>
      </div>
       <div class="form-field">
        <label for="descricao">Descrição</label>
        <textarea id="descricao" formControlName="descricao"></textarea>
      </div>
    </form>
  </app-pop-up>
}