<div class="page-container">

  <header class="header-bar">
    <h1>Disciplinas</h1>
  </header>

  <div class="content-table-wrapper">
    <table class="disciplines-table">
      <thead>
        <tr>
          <th class="col-nome">Nome</th>
          <th class="col-curso">Curso</th>
          <th class="col-ch">Carga horária</th>
          <th class="col-tipo">Tipo</th>
          <th class="col-class">Classificação</th>
          <th class="col-action"></th> </tr>
      </thead>

      <tbody>
        @for (disc of disciplines(); track disc.id) {
          <tr class="discipline-row" (click)="toggleExpand(disc)">
            <td>
              <div class="nome-principal">{{ disc.nome }} ({{ disc.codigo }})</div>
            </td>
            <td>{{ disc.curso }}</td>
            <td>{{ disc.cargaHoraria }}h</td>
            <td>{{ disc.tipo }}</td>
            <td>{{ disc.classificacao }}</td>
            <td>
              <svg class="expand-icon" [class.rotated]="disc.expanded" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
              </svg>
            </td>
          </tr>

          @if (disc.expanded) {
            <tr class="description-row">
              <td colspan="6" class="description-content">
                <p>{{ disc.descricao }}</p>
              </td>
            </tr>
          }
        } @empty {
          <tr>
            <td colspan="6" style="text-align: center; padding: 20px;">Nenhuma disciplina encontrada.</td>
          </tr>
        }
      </tbody>
    </table>
    </div>

  <footer class="footer-actions">
    <app-botao-adicionar
      [textoBotao]="'+ Adicionar Disciplina'"
      (clickEvent)="openModalToAdd()"
    ></app-botao-adicionar>
  </footer>
</div>

@if (isModalVisible()) {
  <app-pop-up-adicionar-materia
    (close)="handleCloseModal()"
    (save)="handleSaveNewDiscipline($event)"
  ></app-pop-up-adicionar-materia>
}